<!-- *Start* Views/layouts/_header.html -->
<div class="navSpacing"></div>
<div class="navbarBack">
<nav class="navbar" role="navigation">
  <div class="inLineLeft">
    <ul>
      <li><%= link_to root_path do %>
          <%= image_tag('Full-Logo.png', size: "151x47") %>
          <% end %>
      </li>
    </ul>
  </div>

 <% if signed_in? %> <!-- if signed in _header-->
  <ul class="navbar-left">
    <li>
      <%= form_tag search_path, method: "get", class: "search-bar" do %>
      <%= text_field_tag :search, params[:search], placeholder: "Search..." %>
      <% end %>
    </li>
  </ul>

  <div class="inLineRight iconBar">
    <ul id="menu">
      <li class="navIcon tilt" id="home">
        <%= link_to root_path do %>
        <%= image_tag('home1.fw.png', size: "32x32") %>
        <% end %>
      </li>
      <li class="navIcon tilt" id="explore">        
      <%= link_to explore_user_path(session[:user_id]) do %>
        <%= image_tag('educational27.png', size: "32x32") %>
      <% end %>
      </li>
      <li class="navIcon tilt" id="profile">
        <%= link_to feed_user_path(session[:user_id]) do %>
        <%= image_tag(current_user.avatar(:small), class: "user_profile_picture") %>
        <% end %>
      </li>
      <li class="navIcon tilt" id="notifications">
        <%= link_to notifications_path do %>
        <%= image_tag('notifications.fw.png', size: "32x32") %>
        <% end %>
      </li>
      <li class="navIcon">
        <a href="#" class="dropdown-toggle">
          <%= image_tag('menu24.fw.png', size: "32x32") %> <b class="caret"></b>
        </a>
        <ul class="menuDropdown">
          <li class="doubleDrop"><%= link_to "Settings", edit_user_path(session[:user_id]) %></li>
          <li class="doubleDrop"><%= link_to "Help", help_path %></li>
          <li class="doubleDrop"><%= link_to "Feedback", contacts_path %></li>
          <li class="divider"></li>
          <li class="doubleDrop"><%= link_to "Log out", signout_path, method: "delete" %></li>
        </ul>
      </li>
    </ul> 
  
  </div>


 <% else %> <!-- else _header-->

  <div class="inLineRight">
    <%= form_for(:session, url: sessions_path, html: { class: "loginForm" }) do |f| %>
      <span>
       <%= f.text_field :email, placeholder: "Email", class: "navbarInput" %>
      </span>
      <span>
        <%= f.password_field :password, placeholder: "Password", class: "navbarInput" %>
      </span>
      <span>
         <%= f.submit "Log in", class: "button", id: "loginButton" %>
      </span>
     <% end %>
  </div>

<% end %>

</nav>

<script>
$(document).ready(function(){
    $(".navIcon").removeClass("activeNavIcon");
    var urlPath = window.location.pathname;
    //alert(urlPath);
    if(urlPath == "/"){
      $('#home').addClass("activeNavIcon");
    }
    else if(urlPath.indexOf('/explore')!== -1){
      $('#explore').addClass("activeNavIcon");
    }
    else if(urlPath.indexOf('/feed')!== -1){
      $('#profile').addClass("activeNavIcon");
    }
    else if(urlPath.indexOf('/nfuse_page')!== -1){
      $('#profile').addClass("activeNavIcon");
    } 
    else if(urlPath.indexOf('/following')!== -1){
      $('#profile').addClass("activeNavIcon");
    } 
    else if(urlPath.indexOf('/followers')!== -1){
      $('#profile').addClass("activeNavIcon");
    } 
    else if(urlPath.indexOf('/notifications')!== -1){
      $('#notifications').addClass("activeNavIcon");
    } 
  $('.menuDropdown').hide();
  //alert("header.js");
  $('.dropdown-toggle').click(function () {
    $('.menuDropdown').toggle(300);
  });
  $('.navIcon').click(function (){
    $(".navIcon").removeClass("activeNavIcon");
  });
});
</script>
</div>
<!-- *End* Views/layouts/_header.html -->
