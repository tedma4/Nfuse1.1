<style>
.tab-content {
    border-radius: 0px;
    padding: 0px 30px;
}
  .container-fluid {
    padding-left: 0px;
    padding-right: 0px;
    margin-right: auto;
    margin-left: auto;
}
.row {
  margin-left: 0px;
  margin-right: 0px;
}
</style>
<section id="thehub" class="container-fluid clearfix">
  <nav id="user-nav" class="hub center navbar">
    <ul>
      <li><%= link_to 'All', root_path , class: "btn btn-link-2" %> </li>
      <li><%= link_to 'Nfusers', followed_nfusers_user_path(current_user) , class: "btn btn-link-2" %></li>
      <li><%= link_to 'Pages', followed_pages_user_path(current_user), class: "btn btn-link-2" %></li>
    </ul>
  </nav>
</section>
<section id="masonJar" class="clearfix">
  <div class="grid-sizer"></div>
  <div class="gutter-sizer"></div>
  <% @posts.each do |post| %>
    <% @post_entry = Notification::Timeline.new(post.votable_id, post.social_flag, Page.find(post.owner_id)).construct %>
    <!-- POST -->
    <article class="item individual_post <%= @post_entry.provider %>_post0">
      <header class="post_header">
        <div class="user">
          <%= image_tag(@post_entry.page.profile_pic, class: 'user_profile_picture', size:'45x45', alt: 'P6pl2kfg normal') %>
          <a href="/"><%= @post_entry.page.full_name %></a>
        </div>
        <%= link_to @post_entry.link_to_post, class: 'timeStamp', target: 'blank', title: 'Go to entry' do %>
          <i class="fa"></i> <%= time_ago_in_words(@post_entry.created_time) %>
        <% end %>
      </header>
        <% case @post_entry.provider %>
        <% when 'instagram' %>
          <% if @post_entry.type == "image" %>
            <div class="timeline-user-box">
              <%= image_tag(@post_entry.image, :class => "image_post") %>
            </div>
            <% if @post_entry.text.present? %>
              <div class="center">
                <%= @post_entry.text %>
              </div>
            <% end %>
          <% elsif @post_entry.type == "video" %>
            <div class="center">
              <video controls autoload="none" style="background:transparent url(<%= @post_entry.image %>) no-repeat 50% 50%;" >
                <source src="<%= @post_entry.video %>" type='video/mp4' />
                <source src="<%= @post_entry.video %>" type='video/ogv' />
              </video>
            </div>
            <% if @post_entry.text.present? %>
              <div class="center">
                <%= @post_entry.text %>
              </div>
            <% end %>
          <% end %>
        <% when 'twitter' %>
          <% if @post_entry.has_media? %>
            <% if @post_entry.type == 'animated_gif' || @post_entry.type== 'video' %>
              <div class="center">
                <video controls autoload="none" style="background:transparent url(<%= @post_entry.image %>) no-repeat 50% 50%;" >
                  <source src="<%= @post_entry.video %>" type='video/mp4' />
                  <source src="<%= @post_entry.video %>" type='video/ogv' />
                </video>
              </div>
            <% elsif @post_entry.type == 'photo' %>
              <div class="timeline-user-box">
                <%= image_tag(@post_entry.image, :class => "image_post") %>
              </div>
            <% end %>
          <% end %>
          <div class="center">
            <%= @post_entry.text %>
          </div>
        <% when 'google_oauth2' %>
          <iframe
            id="ytplayer"
            type="text/html"
            width="100%"
            height="225"
            src="https://www.youtube.com/embed/<%= @post_entry.video %>"
            frameborder="0"
            allowfullscreen>
          </iframe>
          <% if @post_entry.text.present? %>
            <div class="center">
              <%= @post_entry.text %>
            </div>
          <% end %>
        <%end%>
      <footer class="post_actions">
        <% if ActsAsVotable::Vote.where(votable_id: @post_entry.id).pluck(:voter_id).include?(current_user.id) %>
            <%= link_to dislike_shout_path(id: @post_entry.id, owner_id: @post_entry.page.id, owner_type: @post_entry.page.class.name, key: @post_entry.provider), {method: :delete, remote: true, class: 'likePost liked'} do %>
                <i class="fa"></i><span class="liked-<%= @post_entry.id %>"><%= ActsAsVotable::Vote.where(votable_id: @post_entry.id).count %></span>
            <% end %>
        <% else %>
          <%= link_to like_shout_path(id: @post_entry.id, owner_id: @post_entry.page.id, owner_type: @post_entry.page.class.name, key: @post_entry.provider), {method: :post, remote: true, class: 'likePost'} do %>
              <i class="fa"></i><span class="liked-<%= @post_entry.id %>"><%= ActsAsVotable::Vote.where(votable_id: @post_entry.id).count %></span>
          <% end %>
        <% end %>
      </footer>
    </article>
  <% end %>
</section>