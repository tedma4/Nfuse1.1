
<% if @comment.parent.nil? %>
  <% if @comment.new_record? %>
    alert('Your comment cannot be saved.');
  <% else %>
    $('#absolute_postition_test').modal('toggle');
    $('.media-list').prepend("<%= j render(partial: 'comments/comment', locals: {comment: @comment}) %>");
    $('#comment_body').val('');
  <% end %>
<% else %>

  var publisher = client.publish('/comments', {
    message: "<%= j render(partial: 'comments/comment', locals: {comment: @comment}) %>"
  });
  // console.log()
  publisher.callback(function() {
    $('#comment_body').val('');
    $('#submit_sub_comment').find("button[type='submit']").val('Submit').prop('disabled', false)
  });

  publisher.errback(function() {
    alert('There was an error while posting your comment.');
  });
<% end %>